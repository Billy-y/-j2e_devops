node {

    stage('clone') {
    
        git credentialsId: 'github', url: 'git@gitlab.com:billal.yahiaoui.01/j2e_devops.git'
        
    }
    
    stage('test') {
    
    sh 'mvn test'
    }
    
        stage('build') {
    
    sh 'mvn clean install package'
    }
    
      stage('deploy') {
    
    deploy adapters: [tomcat8(credentialsId: 'user_tomcat', path: '', url: 'http://192.168.1.157:8080/')], contextPath: null, war: '**/*.war'

      }
}
